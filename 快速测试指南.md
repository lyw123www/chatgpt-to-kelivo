# 快速测试指南

## 🚀 快速开始

### 1. 重新加载扩展（30秒）

1. 打开 Chrome 浏览器
2. 地址栏输入：`chrome://extensions/`
3. 找到 "ChatGPT to Kelivo Exporter"
4. 点击 🔄 **重新加载** 按钮

### 2. 测试导出（2分钟）

1. 打开 https://chat.openai.com/
2. 选择一个包含丰富内容的对话（列表、代码块、粗体等）
3. 点击页面上的 **"导出到 Kelivo"** 按钮
4. 观察进度提示：
   ```
   正在滚动到顶部...
   正在加载消息... 25%
   正在加载消息... 50%
   正在加载消息... 75%
   正在加载消息... 100%
   正在加载最后的消息...
   整理消息中...
   等待消息渲染完成...
   正在提取对话内容...
   正在生成 Markdown...
   导出成功！
   ```

### 3. 验证结果（1分钟）

1. 打开导出的 `.md` 文件
2. 检查内容是否完整：
   - ✅ 所有列表项都在
   - ✅ 所有参考链接都在
   - ✅ 格式保留完整（粗体、代码块等）
   - ✅ 消息数量正确

### 4. 导入 Kelivo（1分钟）

1. 打开 Kelivo
2. 导入刚才导出的 `.md` 文件
3. 检查：
   - ✅ 消息数量正确（不会从8条变成32条）
   - ✅ 格式显示正常
   - ✅ 内容完整无遗漏

## 🔍 查看调试信息

### 打开控制台

1. 在 ChatGPT 页面按 **F12**
2. 切换到 **Console**（控制台）标签
3. 点击 "导出到 Kelivo" 按钮
4. 查看输出的日志

### 关键日志

```
=== 开始滚动加载所有消息 ===
滚动容器: MAIN, 类名: flex-1 overflow-auto
初始滚动高度: 5000, 视口高度: 800
检测到新内容加载: 5000 -> 6200
已滚动到底部
滚动完成，共滚动 15 次
=== 滚动加载完成 ===

使用选择器: [data-message-author-role]
找到 8 个消息元素

消息 1: 角色=user, roleAttr=user
  找到 markdown 容器，子元素数量: 3
  === 开始转换 HTML 为 Markdown (消息 1) ===
  克隆后的元素子节点数量: 5
  === 转换完成，Markdown 长度: 234 ===

消息 2: 角色=assistant, roleAttr=assistant
  找到 markdown 容器，子元素数量: 12
  === 开始转换 HTML 为 Markdown (消息 2) ===
  克隆后的元素子节点数量: 25
    处理 ul 元素，listLevel=0, 子节点数=10
    处理 li 元素，listLevel=0, 子节点数=3
  === 转换完成，Markdown 长度: 1567 ===

成功提取 8 条消息
```

### 检查要点

1. **滚动次数**：如果太少（<5次），可能没有完全加载
2. **消息数量**：应该与页面显示的一致
3. **子元素数量**：如果很少（<3），可能内容不完整
4. **Markdown 长度**：如果明显偏小，说明内容丢失

## ⚠️ 常见问题

### 问题1：导出时间很长

**原因**：对话很长，需要滚动加载所有内容

**解决**：
- 正常现象，请耐心等待
- 长对话（>30条消息）可能需要 15-30 秒

### 问题2：页面一直在滚动

**原因**：正在加载所有消息

**解决**：
- 不要手动滚动页面
- 等待进度提示显示 "100%"

### 问题3：内容还是不完整

**排查步骤**：
1. 查看控制台日志，找到 "滚动完成，共滚动 X 次"
2. 如果滚动次数很少（<5次），可能是滚动逻辑有问题
3. 查看 "找到 X 个消息元素"，确认消息数量
4. 查看每条消息的 "子元素数量"，如果很少可能是容器选择问题

**临时解决**：
1. 手动滚动到对话底部，等待所有内容加载
2. 再点击 "导出到 Kelivo" 按钮

### 问题4：导出失败

**可能原因**：
- ChatGPT 页面结构变化
- 浏览器版本不兼容
- 扩展权限不足

**解决**：
1. 查看控制台的错误信息
2. 尝试刷新页面后重新导出
3. 检查扩展是否有更新

## 📊 性能参考

| 对话长度 | 消息数量 | 预计时间 | 滚动次数 |
|---------|---------|---------|---------|
| 短对话   | 3-10条  | 2-5秒   | 3-8次   |
| 中等对话 | 10-30条 | 5-15秒  | 8-20次  |
| 长对话   | 30-50条 | 15-30秒 | 20-40次 |
| 超长对话 | >50条   | 30-60秒 | 40-80次 |

## ✅ 验证清单

导出完成后，请检查以下项目：

- [ ] 消息数量正确
- [ ] 所有列表项都在
- [ ] 所有参考链接都在
- [ ] 粗体、斜体格式保留
- [ ] 代码块格式正确
- [ ] 表格格式正确
- [ ] 导入 Kelivo 后格式正常
- [ ] 导入 Kelivo 后消息数量正确

## 🐛 报告问题

如果发现问题，请提供：

1. **浏览器信息**：Chrome 版本号
2. **对话信息**：消息数量、内容类型
3. **控制台日志**：完整的控制台输出（右键 → Save as...）
4. **截图**：
   - 原始 ChatGPT 对话
   - 导出的 Markdown 文件
   - 导入 Kelivo 后的效果
5. **HTML 结构**：
   - 在 ChatGPT 页面按 F12
   - 切换到 Elements 标签
   - 选择一条消息
   - 右键 → Copy → Copy outerHTML
   - 粘贴到文本文件中

## 📝 反馈

测试完成后，请反馈：

1. ✅ 导出成功，内容完整
2. ⚠️ 导出成功，但有小问题（请描述）
3. ❌ 导出失败（请提供错误信息）

---

**感谢测试！** 🎉

